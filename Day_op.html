<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Daily OP Records</title>
<link rel="stylesheet" href="styles.css" />
<style>
  h1 { margin: 0 0 12px; font-size: 20px; }
  .actions { margin-bottom: 12px; }
  button { background:#0d6efd; color:#fff; border:1px solid #0b5ed7; border-radius:4px; padding:6px 12px; cursor:pointer; }
</style>
</head>
<body>
  <h1>Daily OP Records</h1>
  <div class="actions">
    <span class="muted">Entries are saved in this browser only.</span>
  </div>
  <table>
    <thead>
      <tr>
        <th style="width:5ch">#</th>
        <th>Name</th>
        <th style="width:16ch">Phone</th>
        <th style="width:16ch">Date</th>
      </tr>
    </thead>
    <tbody id="rows"></tbody>
  </table>

  <script>
    (function(){
      const key = 'op_day_entries';
      function load(){
        const raw = localStorage.getItem(key);
        const list = raw ? JSON.parse(raw) : [];
        const tbody = document.getElementById('rows');
        tbody.innerHTML = '';
        list
          .sort((a,b)=>a.ts-b.ts)
          .forEach((it, idx)=>{
            const tr = document.createElement('tr');
            tr.innerHTML = '<td>'+ (idx+1) +'</td>'+
                           '<td>'+ escapeHtml(it.name) +'</td>'+
                           '<td>'+ escapeHtml(it.phone) +'</td>'+
                           '<td>'+ escapeHtml(it.date) +'</td>';
            tbody.appendChild(tr);
          });
      }
      function escapeHtml(s){
        return (s||'').replace(/[&<>"']/g, function(c){
          return ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;','\'':'&#39;'} )[c] || c;
        });
      }
      load();
    })();
  </script>
</body>
</html>

